---
import { Home, Moon, Sun } from '@lucide/astro';

const base = import.meta.env.BASE_URL;
---

<header class="sticky top-0 z-50 bg-white/95 dark:bg-slate-900/95 backdrop-blur-lg border-b border-gray-200 dark:border-slate-800 shadow-sm">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <!-- Logo and Brand -->
      <a href={base} class="flex items-center space-x-3 hover:opacity-80 transition-opacity group">
        <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow">
          <span class="text-white text-xl font-bold">Q</span>
        </div>
        <div class="hidden sm:block">
          <span class="text-xl font-bold text-gray-900 dark:text-white">Daily Quiz</span>
          <p class="text-xs text-gray-500 dark:text-gray-400 -mt-1">Test Your Knowledge</p>
        </div>
      </a>

      <!-- Navigation -->
      <nav class="hidden md:flex items-center space-x-6">
        <a href={base} class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition-colors">
          Home
        </a>
        <a href={`${base}category/tech/`} class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition-colors">
          Tech
        </a>
        <a href={`${base}category/science/`} class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition-colors">
          Science
        </a>
        <a href={`${base}category/history/`} class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition-colors">
          History
        </a>
        <a href={`${base}category/pop-culture/`} class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition-colors">
          Pop Culture
        </a>
      </nav>

      <!-- Theme Toggle -->
      <button
        id="theme-toggle"
        class="p-2.5 rounded-xl hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors"
        aria-label="Toggle theme"
      >
        <Moon class="w-5 h-5 text-gray-700 dark:text-gray-300 dark:hidden" />
        <Sun class="w-5 h-5 text-gray-300 hidden dark:block" />
      </button>
    </div>
  </div>
</header>

<script>
  // Theme toggle functionality
  function initTheme() {
    const theme = (() => {
      if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
        return localStorage.getItem('theme');
      }
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        return 'dark';
      }
      return 'light';
    })();

    if (theme === 'dark') {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  }

  // Initialize theme on page load
  initTheme();

  // Add event listener
  document.addEventListener('DOMContentLoaded', () => {
    const toggleBtn = document.getElementById('theme-toggle');
    if (toggleBtn) {
      toggleBtn.addEventListener('click', () => {
        const isDark = document.documentElement.classList.toggle('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      });
    }
  });

  // Re-initialize on navigation (for Astro view transitions)
  document.addEventListener('astro:page-load', () => {
    initTheme();
  });
</script>
